# ä¼ é€ç«¯æ£€æµ‹æŒ‡å—

## ğŸ¯ é—®é¢˜è¯Šæ–­

å½“å‰Unityç«¯æ˜¾ç¤ºç°è‰²ç”»é¢ï¼Œå°ºå¯¸ä¸º1280x400ï¼Œè¯´æ˜**ä¼ é€ç«¯ï¼ˆWebç«¯ï¼‰çš„Canvasæˆ–getDisplayMediaè®¾ç½®æœ‰é—®é¢˜**ã€‚

## ğŸ” ä¼ é€ç«¯éœ€è¦æ£€æŸ¥çš„åœ°æ–¹

### 1. getDisplayMedia è®¾ç½®

ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„è§†é¢‘çº¦æŸï¼š

```javascript
// âœ… æ­£ç¡®è®¾ç½®
const stream = await navigator.mediaDevices.getDisplayMedia({
  video: {
    width: { ideal: 1280 },
    height: { ideal: 720 },
    frameRate: { ideal: 30, max: 30 }
  }
});

// æ£€æŸ¥å®é™…è®¾ç½®
console.log('ä¼ é€ç«¯è§†é¢‘è®¾ç½®:', stream.getVideoTracks()[0].getSettings());
// åº”è¯¥è¾“å‡º: { width: 1280, height: 720, ... }
```

### 2. Canvas è®¾ç½®

å¦‚æœä½¿ç”¨Canvasç»˜åˆ¶å†ä¼ è¾“ï¼š

```javascript
// âœ… æ­£ç¡®è®¾ç½®Canvaså°ºå¯¸
const canvas = document.getElementById('myCanvas');
canvas.width = 1280;   // ä¸æ˜¯CSS width
canvas.height = 720;   // ä¸æ˜¯CSS height

// ç¡®ä¿è§†é¢‘å…ƒç´ å°ºå¯¸åŒ¹é…
const video = document.getElementById('myVideo');
video.width = canvas.width;
video.height = canvas.height;

// ç»˜åˆ¶æ—¶ä½¿ç”¨æ­£ç¡®å°ºå¯¸
ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
```

### 3. WebRTC ä¼ è¾“è®¾ç½®

```javascript
// ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„stream
const stream = await navigator.mediaDevices.getDisplayMedia({...});
peerConnection.addTrack(stream.getVideoTracks()[0], stream);

// âŒ ä¸è¦ä½¿ç”¨getUserMediaï¼ˆæ‘„åƒå¤´ï¼‰
// const cameraStream = await navigator.mediaDevices.getUserMedia({...});
```

## ğŸ”§ Unityç«¯è°ƒè¯•åŠŸèƒ½

Unityç«¯å·²æ·»åŠ ä»¥ä¸‹è°ƒè¯•åŠŸèƒ½ï¼š

1. **è‡ªåŠ¨ä¿å­˜ç¬¬ä¸€å¸§**ï¼š`debug_frame.png` æ–‡ä»¶ä¼šä¿å­˜åˆ°é¡¹ç›®æ ¹ç›®å½•
2. **å°ºå¯¸æ£€æµ‹**ï¼šå¦‚æœæ”¶åˆ°1280x400ï¼Œä¼šæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
3. **æ¯”ä¾‹æ§åˆ¶**ï¼šè‡ªåŠ¨æ·»åŠ AspectRatioFitteré¿å…ç”»é¢å‹æ‰

## ğŸ“‹ æ£€æŸ¥æ¸…å•

- [ ] ä¼ é€ç«¯ä½¿ç”¨ `getDisplayMedia` è€Œä¸æ˜¯ `getUserMedia`
- [ ] Canvasçš„ `width` å’Œ `height` å±æ€§è®¾ç½®ä¸º1280x720
- [ ] æ²¡æœ‰ä½¿ç”¨CSSè®¾ç½®Canvaså°ºå¯¸
- [ ] æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯
- [ ] ç¡®è®¤é€‰æ‹©çš„æ˜¯æ­£ç¡®çš„å±å¹•/çª—å£è¿›è¡Œåˆ†äº«

## ğŸš¨ å¸¸è§é”™è¯¯

1. **Canvasé«˜åº¦400px**ï¼šCSSè®¾ç½®äº† `height: 400px`ï¼Œä½†Canvaså±æ€§åº”è¯¥æ˜¯720
2. **é€‰æ‹©é”™è¯¯çª—å£**ï¼šæµè§ˆå™¨å¼¹å‡ºé€‰æ‹©æ—¶é€‰æ‹©äº†ç©ºç™½çª—å£
3. **ä½¿ç”¨æ‘„åƒå¤´**ï¼šé”™è¯¯ä½¿ç”¨äº† `getUserMedia` è€Œä¸æ˜¯ `getDisplayMedia`

## ğŸ“ ä¸‹ä¸€æ­¥

1. è¿è¡ŒUnityé¡¹ç›®ï¼ŒæŸ¥çœ‹Consoleæ—¥å¿—
2. æ£€æŸ¥é¡¹ç›®æ ¹ç›®å½•çš„ `debug_frame.png` æ–‡ä»¶
3. æ ¹æ®é”™è¯¯ä¿¡æ¯ä¿®æ”¹ä¼ é€ç«¯ä»£ç 
4. é‡æ–°æµ‹è¯•è¿æ¥

å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œè¯·æä¾›ä¼ é€ç«¯çš„WebRTCç›¸å…³ä»£ç è¿›è¡Œè¿›ä¸€æ­¥è¯Šæ–­ã€‚
